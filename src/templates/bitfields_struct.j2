{% for register in registers.register %}
struct {{register.name}}register {

{% if register.fields is defined %}
{% for field in register.fields.field %}
    Bitfield<{{field.bitOffset}}, {{field.bitWidth}}> {{field.name}}_;
{% endfor %}

    {{register.name}}register(REG_ADDR base) :
{% for field in register.fields.field %}
        {{field.name}}_{base}
{%- if not loop.last %}
,
{% else %}
 {};
{% endif %}
{% endfor %}
{% else %}
    {{register.name}}register(REG_ADDR base){};
{% endif %}
};

{% endfor %}